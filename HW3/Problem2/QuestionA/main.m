%Chenxin Xia
%2838929158
%Feb 25, 2020
%chenxinx@usc.edu
clc
clear
close all

S = ['001010000';'100010000';'000010100';'000010001';...
     '000011000';'010010000';'000110000';'000010010';...
     '001011000';'011010000';'110010000';'100110000';'000110100';'000010110';'000010011';'000011001';...
     '001011001';'111010000';'100110100';'000010111';...
     '110011000';'010011001';'011110000';'001011010';...
     '011011000';'110110000';'000110110';'000011011';...
     '110011001';'011110100';...
     '111011000';'011011001';'111110000';'110110100';'100110110';'000110111';'000011111';'001011011';...
     '111011001';'111110100';'100110111';'001011111';...
     '011011011';'111111000';'110110110';'000111111';...
     '111011011';'011011111';'111111100';'111111001';'111110110';'110110111';'100111111';'001111111';...
     '111011111';'111111101';'111110111';'101111111'];
M = ['001010000';'100010000';...
     '000010010';'000011000';...
     '001011000';'011010000';'110010000';'100110000';...
     '000110100';'000010110';'000010011';'000011001';...
     '011110000';'110011000';'010011001';'001011010'];
 
T = ['010011000';'010110000';'000110010';'000011010';...
     '001011001';'111010000';'100110100';'000010111';...
     '110011000';'010011001';'011110000';'001011010';...
     '011011000';'110110000';'000110110';'000011011';...
     '110011001';'011110100';...
     '111011000';'011011001';'111110000';'110110100';'100110110';'000110111';'000011111';'001011011';...
     '111011001';'111110100';'100110111';'001011111';...
     '011011011';'111111000';'110110110';'000111111';...
     '111011011';'011011111';'111111100';'111111001';'111110110';'110110111';'100111111';'001111111';...
     '111011111';'111111101';'111110111';'101111111'];
 
 K = ['010011000';'010110000';'000110010';'000011010';...
     '001011001';'111010000';'100110100';'000010111';...
     '111011000';'011011001';'111110000';'110110100';'100110110';'000110111';'000011111';'001011011';...
     '111011001';'111110100';'100110111';'001011111';...
     '011011011';'111111000';'110110110';'000111111';...
     '111011011';'011011111';'111111100';'111111001';'111110110';'110110111';'100111111';'001111111';...
     '111011111';'111111101';'111110111';'101111111';...
     '111111011';'111111110';'110111111';'011111111'];%40
 
 MK = ['000010001';'000010100';'001010000';'100010000';...
      '000010010';'000011000';'000110000';'010010000';...
      '010011000';'010110000';'000011010';'000110010'];


ori_image = round(readraw("fan.raw",558,558)/255);
result = shrink(ori_image,S,M);
writeraw(result*255,'Fan_shrinking_out.raw');


ori_image = round(readraw("cup.raw",356,315)/255);
result = shrink(ori_image,S,M);
writeraw(result*255,'Cup_shrinking_out.raw');


ori_image = round(readraw("maze.raw",558,558)/255);
result = shrink(ori_image,S,M);
writeraw(result*255,'Maze_shrinking_out.raw');


ori_image = round(readraw("fan.raw",558,558)/255);
result = thin(ori_image,T,M);
writeraw(result*255,'Fan_thin_out.raw');


ori_image = round(readraw("cup.raw",356,315)/255);
result = thin(ori_image,T,M);
writeraw(result*255,'Cup_thin_out.raw');

ori_image = round(readraw("maze.raw",558,558)/255);
result = thin(ori_image,T,M);
writeraw(result*255,'Maze_thin_out.raw');

ori_image = round(readraw("fan.raw",558,558)/255);
result = skeletonize(ori_image,K,MK);
writeraw(result*255,'Fan_skeletonize_out.raw');


ori_image = round(readraw("cup.raw",356,315)/255);
result = skeletonize(ori_image,K,MK);
writeraw(result*255,'Cup_skeletonize_out.raw');

ori_image = round(readraw("maze.raw",558,558)/255);
result = skeletonize(ori_image,K,MK);
writeraw(result*255,'Maze_skeletonize_out.raw');
    
    